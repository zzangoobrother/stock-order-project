# 많은 수의 인원을 수용할 수 았는 대기열 시스템을 위한 Redis에 관하여

## 1) 개요
- 대기열 시스템을 Redis를 활용한 시스템으로 과정을 상세히 기술한다.
- 대규모 인원을 수용할 수 있는 효율적인 대기열 시스템 구축을 목표로 진행되었다.

<br>

## 2) Redis 기반 시스템으로 구성
### 2.1 Redis 선택 이유

- 고성능 :
  - 메모리 기반 데이터 구조로 빠른 읽기/쓰기 가능
  - Redis는 초당 100,000개 이상의 읽기/쓰기 작업을 처리할 수 있으며, 대규모 동시 접속 상황에서도 빠른 응답 시간을 유지할 수 있다.

- 확장성 :
  - 대규모 동시 접속 처리에 적합
  - AWS의 ElastiCache 등 Redis Cluster를 사용하여 수평적 확장이 가능하며, 필요에 따라 노드를 추가하여 처리 용량을 늘릴 수 있다.

- 실시간 처리 :
  - 대기열 상태 변경 및 조회를 즉시 반영 가능
  - Redis의 `ZADD', `ZRANK` 명령어를 사용하여 대기열 추가 및 위치 조회를 ms 단위의 지연으로 처리할 수 있다.

- 데이터 구조의 다양성 :
  - Sorted Set 등을 활용한 효율적인 대기열 관리 가능
  - Sorted Set을 사용하여 대기열을 구현하면, `O(log(N))` 시간 복잡도로 대기열 위치를 조회할 수 있다.

<br>

### 2.2 주요 구성 요소
- Sorted Set 사용
  - Sorted Set의 데이터 구조 중 하나로, 각 요소가 score와 연관되어 있는 정렬된 집합이다.
  - 이를 통해 대기열의 순서를 효율적으로 관리할 수 있다.

- 대기열 키 : user:queue:%s:wait, 처리 중인 대기열 키 : user:queue:%s:proceed
  - user:queue:%s:wait 키는 대기 중인 사용자들의 정보를 저장하도록 한다.
  - user:queue:%s:proceed 키는 현재 처리 중인 사용자들의 정보를 저장한다.
  - 각 키는 Sorted Set으로 구현되어 있어 효율적인 순서 관리가 가능하다.

